# Maintainer: GI_Jack <iamjacksemail@hackermail.com>
pkgname=i2p-controller
pkgver=1.1
pkgrel=1
pkgdesc="GUI I2P Controller written in python."
url="http://sourceforge.net/projects/i2pcontroller/"
arch=('any')
license=('GPLv3' 'GPLv2')
depends=('python-pyqt4' 'python' 'xdg-utils' 'i2p')
source=('i2pcontroller.tar.gz')
sha256sums=('ffc1349b14109a13d7f731276a49f768064e244d9cb178b765d6c1d834d8aac5')

build() {
  cd "${srcdir}"
  #compile into bytecode
  python -m py_compile i2pcontroller.py mainwindow.py # precompile bytecode
}
 
package() {
  cd "${pkgdir}"
  #make directories
  mkdir -p usr/share/i2pcontroller
  mkdir -p usr/bin
  mkdir -p usr/share/applications

  #copy files
  mv "${srcdir}/i2pcontroller.py" usr/share/i2pcontroller/
  mv "${srcdir}/mainwindow.py" usr/share/i2pcontroller/
  mv "${srcdir}/__pycache__/"* usr/share/i2pcontroller/
  mv "${srcdir}/wrapper.config" usr/share/i2pcontroller/

  mv "${srcdir}/ip2controller" usr/bin/
  mv "${srcdir}/i2prouter" usr/share/i2pcontroller/
  mv "${srcdir}/i2pcontroller.desktop" usr/share/applications/
  #rename compiled files
  cd usr/share/i2pcontroller
  mv i2pcontroller.cpython-34.pyc i2pcontroller.pyc
  mv mainwindow.cpython-34.pyc mainwindow.pyc
}
 
# vim:set ts=2 sw=2 et:
